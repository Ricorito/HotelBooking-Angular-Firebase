"use strict";(self.webpackChunkszallas_foglalo=self.webpackChunkszallas_foglalo||[]).push([[885],{1885:(Q,k,l)=>{l.r(k),l.d(k,{HotelFormComponent:()=>Z});var E=l(177),i=l(9417),F=l(8498),c=l(5596),O=l(8599),x=l(3746),P=l(4308),C=l(2798),b=l(1551),p=l(6471),v=l(9183),I=l(8822),D=l(5558),j=l(7673),t=l(9498),y=l(3888),M=l(3733),T=l(246);const R=()=>({standalone:!0});function z(n,s){1&n&&(t.qex(0),t.j41(1,"div",4),t.nrm(2,"mat-spinner"),t.k0s(),t.bVm())}function A(n,s){1&n&&(t.j41(0,"mat-error"),t.EFF(1," A hotel neve k\xf6telez\u0151 "),t.k0s())}function H(n,s){1&n&&(t.j41(0,"mat-error"),t.EFF(1," A c\xedm k\xf6telez\u0151 "),t.k0s())}function B(n,s){1&n&&(t.j41(0,"mat-error"),t.EFF(1," A v\xe1ros k\xf6telez\u0151 "),t.k0s())}function G(n,s){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Az orsz\xe1g k\xf6telez\u0151 "),t.k0s())}function N(n,s){1&n&&(t.j41(0,"mat-error"),t.EFF(1," A le\xedr\xe1s k\xf6telez\u0151 "),t.k0s())}function L(n,s){1&n&&(t.j41(0,"mat-error"),t.EFF(1," A csillagok sz\xe1ma k\xf6telez\u0151 "),t.k0s())}function S(n,s){1&n&&(t.j41(0,"mat-error"),t.EFF(1," A csillagok sz\xe1ma 1 \xe9s 5 k\xf6z\xf6tt lehet "),t.k0s())}function U(n,s){if(1&n){const e=t.RV6();t.j41(0,"mat-chip",33),t.bIt("removed",function(){const a=t.eBV(e).index,m=t.XpG(3);return t.Njj(m.removeAmenity(a))}),t.EFF(1),t.j41(2,"button",34)(3,"mat-icon"),t.EFF(4,"cancel"),t.k0s()()()}if(2&n){const e=s.$implicit;t.R7$(),t.SpI(" ",e.value," ")}}function Y(n,s){if(1&n&&(t.j41(0,"div",31)(1,"mat-chip-set"),t.DNE(2,U,5,1,"mat-chip",32),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",e.amenities.controls)}}function $(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",35)(1,"mat-form-field",36)(2,"mat-label"),t.EFF(3),t.k0s(),t.nrm(4,"input",37),t.k0s(),t.j41(5,"button",38),t.bIt("click",function(){const a=t.eBV(e).index,m=t.XpG(2);return t.Njj(m.removeImage(a))}),t.j41(6,"mat-icon"),t.EFF(7,"delete"),t.k0s()()()}if(2&n){const e=s.index,o=t.XpG(2);t.R7$(3),t.SpI("K\xe9p URL ",e+1,""),t.R7$(),t.Y8G("formControlName",e),t.R7$(),t.Y8G("disabled",1===o.images.length)}}function K(n,s){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Az email c\xedm k\xf6telez\u0151 "),t.k0s())}function W(n,s){1&n&&(t.j41(0,"mat-error"),t.EFF(1," \xc9rv\xe9nytelen email c\xedm "),t.k0s())}function X(n,s){1&n&&(t.j41(0,"mat-error"),t.EFF(1," A telefonsz\xe1m k\xf6telez\u0151 "),t.k0s())}function V(n,s){1&n&&(t.qex(0),t.nrm(1,"mat-spinner",39),t.bVm())}function w(n,s){if(1&n&&t.EFF(0),2&n){const e=t.XpG(2);t.SpI(" ",e.isEditMode?"Ment\xe9s":"L\xe9trehoz\xe1s"," ")}}function J(n,s){if(1&n){const e=t.RV6();t.j41(0,"form",5),t.bIt("ngSubmit",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.onSubmit())}),t.j41(1,"div",6)(2,"mat-form-field",7)(3,"mat-label"),t.EFF(4,"Hotel neve"),t.k0s(),t.nrm(5,"input",8),t.DNE(6,A,2,0,"mat-error",9),t.k0s()(),t.j41(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),t.EFF(10,"C\xedm"),t.k0s(),t.nrm(11,"input",10),t.DNE(12,H,2,0,"mat-error",9),t.k0s()(),t.j41(13,"div",11)(14,"mat-form-field",12)(15,"mat-label"),t.EFF(16,"V\xe1ros"),t.k0s(),t.nrm(17,"input",13),t.DNE(18,B,2,0,"mat-error",9),t.k0s(),t.j41(19,"mat-form-field",12)(20,"mat-label"),t.EFF(21,"Orsz\xe1g"),t.k0s(),t.nrm(22,"input",14),t.DNE(23,G,2,0,"mat-error",9),t.k0s()(),t.j41(24,"div",6)(25,"mat-form-field",7)(26,"mat-label"),t.EFF(27,"Le\xedr\xe1s"),t.k0s(),t.nrm(28,"textarea",15),t.DNE(29,N,2,0,"mat-error",9),t.k0s()(),t.j41(30,"div",6)(31,"mat-form-field",7)(32,"mat-label"),t.EFF(33,"Csillagok sz\xe1ma"),t.k0s(),t.nrm(34,"input",16),t.DNE(35,L,2,0,"mat-error",9)(36,S,2,0,"mat-error",9),t.k0s()(),t.j41(37,"div",6)(38,"h3"),t.EFF(39,"Szolg\xe1ltat\xe1sok"),t.k0s(),t.j41(40,"div",17)(41,"mat-form-field",18)(42,"mat-label"),t.EFF(43,"\xdaj szolg\xe1ltat\xe1s"),t.k0s(),t.j41(44,"input",19),t.mxI("ngModelChange",function(a){t.eBV(e);const m=t.XpG();return t.DH7(m.amenityInput,a)||(m.amenityInput=a),t.Njj(a)}),t.k0s()(),t.j41(45,"button",20),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.addAmenity())}),t.j41(46,"mat-icon"),t.EFF(47,"add"),t.k0s()()(),t.DNE(48,Y,3,1,"div",21),t.k0s(),t.j41(49,"div",6)(50,"h3"),t.EFF(51,"K\xe9pek"),t.k0s(),t.j41(52,"div",22),t.DNE(53,$,8,3,"div",23),t.j41(54,"button",24),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.addImage())}),t.j41(55,"mat-icon"),t.EFF(56,"add_photo_alternate"),t.k0s(),t.EFF(57," \xdaj k\xe9p hozz\xe1ad\xe1sa "),t.k0s()()(),t.j41(58,"div",25)(59,"mat-form-field",12)(60,"mat-label"),t.EFF(61,"Email"),t.k0s(),t.nrm(62,"input",26),t.DNE(63,K,2,0,"mat-error",9)(64,W,2,0,"mat-error",9),t.k0s(),t.j41(65,"mat-form-field",12)(66,"mat-label"),t.EFF(67,"Telefonsz\xe1m"),t.k0s(),t.nrm(68,"input",27),t.DNE(69,X,2,0,"mat-error",9),t.k0s()(),t.j41(70,"div",28)(71,"button",29),t.EFF(72,"M\xe9gse"),t.k0s(),t.j41(73,"button",30),t.DNE(74,V,2,0,"ng-container",3)(75,w,1,1,"ng-template",null,1,t.C5r),t.k0s()()()}if(2&n){let e,o,a,m,_,g,u,d,f,h;const q=t.sdS(76),r=t.XpG();t.Y8G("formGroup",r.hotelForm),t.R7$(6),t.Y8G("ngIf",(null==(e=r.hotelForm.get("name"))?null:e.hasError("required"))&&(null==(e=r.hotelForm.get("name"))?null:e.touched)),t.R7$(6),t.Y8G("ngIf",(null==(o=r.hotelForm.get("address"))?null:o.hasError("required"))&&(null==(o=r.hotelForm.get("address"))?null:o.touched)),t.R7$(6),t.Y8G("ngIf",(null==(a=r.hotelForm.get("city"))?null:a.hasError("required"))&&(null==(a=r.hotelForm.get("city"))?null:a.touched)),t.R7$(5),t.Y8G("ngIf",(null==(m=r.hotelForm.get("country"))?null:m.hasError("required"))&&(null==(m=r.hotelForm.get("country"))?null:m.touched)),t.R7$(6),t.Y8G("ngIf",(null==(_=r.hotelForm.get("description"))?null:_.hasError("required"))&&(null==(_=r.hotelForm.get("description"))?null:_.touched)),t.R7$(6),t.Y8G("ngIf",(null==(g=r.hotelForm.get("stars"))?null:g.hasError("required"))&&(null==(g=r.hotelForm.get("stars"))?null:g.touched)),t.R7$(),t.Y8G("ngIf",((null==(u=r.hotelForm.get("stars"))?null:u.hasError("min"))||(null==(u=r.hotelForm.get("stars"))?null:u.hasError("max")))&&(null==(u=r.hotelForm.get("stars"))?null:u.touched)),t.R7$(8),t.R50("ngModel",r.amenityInput),t.Y8G("ngModelOptions",t.lJ4(18,R)),t.R7$(4),t.Y8G("ngIf",r.amenities.controls.length>0),t.R7$(5),t.Y8G("ngForOf",r.images.controls),t.R7$(10),t.Y8G("ngIf",(null==(d=r.hotelForm.get("contactEmail"))?null:d.hasError("required"))&&(null==(d=r.hotelForm.get("contactEmail"))?null:d.touched)),t.R7$(),t.Y8G("ngIf",(null==(f=r.hotelForm.get("contactEmail"))?null:f.hasError("email"))&&(null==(f=r.hotelForm.get("contactEmail"))?null:f.touched)),t.R7$(5),t.Y8G("ngIf",(null==(h=r.hotelForm.get("contactPhone"))?null:h.hasError("required"))&&(null==(h=r.hotelForm.get("contactPhone"))?null:h.touched)),t.R7$(4),t.Y8G("disabled",r.hotelForm.invalid||r.isSubmitting),t.R7$(),t.Y8G("ngIf",r.isSubmitting)("ngIfElse",q)}}let Z=(()=>{class n{fb;hotelService;route;router;snackBar;hotelForm;isEditMode=!1;isLoading=!1;isSubmitting=!1;hotelId=null;amenityInput="";constructor(e,o,a,m,_){this.fb=e,this.hotelService=o,this.route=a,this.router=m,this.snackBar=_}ngOnInit(){this.initForm(),this.route.paramMap.pipe((0,D.n)(e=>{const o=e.get("id");return this.hotelId=o,this.isEditMode=!!o,o?(this.isLoading=!0,this.hotelService.getHotel(o)):(0,j.of)(null)})).subscribe({next:e=>{e&&this.populateForm(e),this.isLoading=!1},error:e=>{this.isLoading=!1,this.snackBar.open("Hiba a hotel bet\xf6lt\xe9sekor","Bez\xe1r\xe1s",{duration:3e3}),console.error(e)}})}initForm(){this.hotelForm=this.fb.group({name:["",i.k0.required],address:["",i.k0.required],city:["",i.k0.required],country:["",i.k0.required],description:["",i.k0.required],stars:[3,[i.k0.required,i.k0.min(1),i.k0.max(5)]],amenities:this.fb.array([]),images:this.fb.array([this.fb.control("")]),contactEmail:["",[i.k0.required,i.k0.email]],contactPhone:["",i.k0.required]})}populateForm(e){this.hotelForm.patchValue({name:e.name,address:e.address,city:e.city,country:e.country,description:e.description,stars:e.stars,contactEmail:e.contactEmail,contactPhone:e.contactPhone});const o=this.hotelForm.get("amenities");o.clear(),e.amenities&&e.amenities.length>0&&e.amenities.forEach(m=>{o.push(this.fb.control(m))});const a=this.hotelForm.get("images");a.clear(),e.images&&e.images.length>0?e.images.forEach(m=>{a.push(this.fb.control(m))}):a.push(this.fb.control(""))}get amenities(){return this.hotelForm.get("amenities")}get images(){return this.hotelForm.get("images")}addAmenity(){this.amenityInput.trim()&&(this.amenities.push(this.fb.control(this.amenityInput.trim())),this.amenityInput="")}removeAmenity(e){this.amenities.removeAt(e)}addImage(){this.images.push(this.fb.control(""))}removeImage(e){this.images.length>1&&this.images.removeAt(e)}onSubmit(){if(this.hotelForm.invalid)return;this.isSubmitting=!0;const e=this.hotelForm.value;e.images=e.images.filter(o=>""!==o.trim()),this.isEditMode&&this.hotelId?this.hotelService.updateHotel(this.hotelId,e).subscribe({next:()=>{this.isSubmitting=!1,this.snackBar.open("Hotel sikeresen friss\xedtve","Bez\xe1r\xe1s",{duration:3e3}),this.router.navigate(["/hotels"])},error:o=>{this.isSubmitting=!1,this.snackBar.open("Hiba a hotel friss\xedt\xe9sekor","Bez\xe1r\xe1s",{duration:3e3}),console.error(o)}}):this.hotelService.addHotel(e).subscribe({next:()=>{this.isSubmitting=!1,this.snackBar.open("Hotel sikeresen l\xe9trehozva","Bez\xe1r\xe1s",{duration:3e3}),this.router.navigate(["/hotels"])},error:o=>{this.isSubmitting=!1,this.snackBar.open("Hiba a hotel l\xe9trehoz\xe1sakor","Bez\xe1r\xe1s",{duration:3e3}),console.error(o)}})}static \u0275fac=function(o){return new(o||n)(t.rXU(i.ok),t.rXU(y.g),t.rXU(F.nX),t.rXU(F.Ix),t.rXU(I.UG))};static \u0275cmp=t.VBU({type:n,selectors:[["app-hotel-form"]],decls:9,vars:3,consts:[["formContent",""],["buttonText",""],[1,"hotel-form-container"],[4,"ngIf","ngIfElse"],[1,"loading-spinner"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","Hotel neve"],[4,"ngIf"],["matInput","","formControlName","address","placeholder","C\xedm"],[1,"form-row","location-row"],["appearance","outline"],["matInput","","formControlName","city","placeholder","V\xe1ros"],["matInput","","formControlName","country","placeholder","Orsz\xe1g"],["matInput","","formControlName","description","rows","4","placeholder","Le\xedr\xe1s"],["matInput","","type","number","formControlName","stars","min","1","max","5"],[1,"amenities-input"],["appearance","outline",1,"amenity-field"],["matInput","","placeholder","Pl. WiFi, Medence, stb.",3,"ngModelChange","ngModel","ngModelOptions"],["type","button","mat-mini-fab","","color","primary",3,"click"],["class","amenities-list",4,"ngIf"],["formArrayName","images",1,"images-container"],["class","image-input",4,"ngFor","ngForOf"],["type","button","mat-stroked-button","","color","primary",3,"click"],[1,"form-row","contact-row"],["matInput","","formControlName","contactEmail","type","email","placeholder","Email"],["matInput","","formControlName","contactPhone","placeholder","Telefonsz\xe1m"],[1,"form-actions"],["mat-button","","type","button","routerLink","/hotels"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"amenities-list"],[3,"removed",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove",""],[1,"image-input"],["appearance","outline",1,"image-field"],["matInput","","placeholder","https://example.com/image.jpg",3,"formControlName"],["type","button","mat-icon-button","","color","warn",3,"click","disabled"],["diameter","24"]],template:function(o,a){if(1&o&&(t.j41(0,"div",2)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4),t.k0s()(),t.j41(5,"mat-card-content"),t.DNE(6,z,3,0,"ng-container",3)(7,J,77,19,"ng-template",null,0,t.C5r),t.k0s()()()),2&o){const m=t.sdS(8);t.R7$(4),t.JRh(a.isEditMode?"Hotel szerkeszt\xe9se":"\xdaj hotel hozz\xe1ad\xe1sa"),t.R7$(2),t.Y8G("ngIf",a.isLoading)("ngIfElse",m)}},dependencies:[E.MD,E.Sq,E.bT,i.X1,i.qT,i.me,i.Q0,i.BC,i.cb,i.VZ,i.zX,i.j4,i.JD,i.v8,i.YN,i.vS,F.Wk,c.Hu,c.RN,c.m2,c.MM,c.dh,O.M,M.k,M.b,M.d,x.fS,x.fg,P.a,C.h,C.M,T.a,C.e,b.M,b.d,p.YN,p.Jl,p.Zv,p.Jo,v.D6,v.LG,I._T],styles:[".hotel-form-container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}@media (max-width: 599px){.hotel-form-container[_ngcontent-%COMP%]{padding:10px}}.form-row[_ngcontent-%COMP%]{margin-bottom:16px}.location-row[_ngcontent-%COMP%], .contact-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}@media (max-width: 599px){.location-row[_ngcontent-%COMP%], .contact-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:0}}.full-width[_ngcontent-%COMP%]{width:100%}.amenities-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:10px}.amenities-input[_ngcontent-%COMP%]   .amenity-field[_ngcontent-%COMP%]{flex:1}@media (max-width: 599px){.amenities-input[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:5px}.amenities-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-end}}.amenities-list[_ngcontent-%COMP%]{margin-bottom:16px}.images-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.images-container[_ngcontent-%COMP%]   .image-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.images-container[_ngcontent-%COMP%]   .image-input[_ngcontent-%COMP%]   .image-field[_ngcontent-%COMP%]{flex:1}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;margin-top:24px}@media (max-width: 599px){.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}h3[_ngcontent-%COMP%]{margin-bottom:10px;color:#3f51b5;font-weight:500}@media (max-width: 599px){h3[_ngcontent-%COMP%]{font-size:1.1rem}}"]})}return n})()}}]);