"use strict";(self.webpackChunkszallas_foglalo=self.webpackChunkszallas_foglalo||[]).push([[397],{8244:(p,o,r)=>{r.d(o,{S:()=>l});var _=r(1413);class l{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new _.B;constructor(t=!1,n,a=!0,u){this._multiple=t,this._emitChanges=a,this.compareWith=u,n&&n.length&&(t?n.forEach(e=>this._markSelected(e)):this._markSelected(n[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(a=>this._markSelected(a));const n=this._hasQueuedChanges();return this._emitChangeEvent(),n}deselect(...t){this._verifyValueAssignment(t),t.forEach(a=>this._unmarkSelected(a));const n=this._hasQueuedChanges();return this._emitChangeEvent(),n}setSelection(...t){this._verifyValueAssignment(t);const n=this.selected,a=new Set(t.map(e=>this._getConcreteValue(e)));t.forEach(e=>this._markSelected(e)),n.filter(e=>!a.has(this._getConcreteValue(e,a))).forEach(e=>this._unmarkSelected(e));const u=this._hasQueuedChanges();return this._emitChangeEvent(),u}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const n=this._hasQueuedChanges();return t&&this._emitChangeEvent(),n}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(t,n){if(this.compareWith){n=n??this._selection;for(let a of n)if(this.compareWith(t,a))return a;return t}return t}}},8370:(p,o,r)=>{r.d(o,{M:()=>m});var _=r(9498),l=r(2451);let m=(()=>{class c{static \u0275fac=function(a){return new(a||c)};static \u0275mod=_.$C({type:c});static \u0275inj=_.G2t({imports:[l.M]})}return c})()},8499:(p,o,r)=>{r.d(o,{T:()=>u});var _=r(1413),l=r(8141),m=r(152),c=r(5964),t=r(6354),n=r(3740);class u{_letterKeyStream=new _.B;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new _.B;selectedItem=this._selectedItem;constructor(i,s){const h="number"==typeof s?.debounceInterval?s.debounceInterval:200;s?.skipPredicate&&(this._skipPredicateFn=s.skipPredicate),this.setItems(i),this._setupKeyHandler(h)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(i){this._selectedItemIndex=i}setItems(i){this._items=i}handleKey(i){const s=i.keyCode;i.key&&1===i.key.length?this._letterKeyStream.next(i.key.toLocaleUpperCase()):(s>=n.c&&s<=n.Z||s>=n.d&&s<=n.N)&&this._letterKeyStream.next(String.fromCharCode(s))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(i){this._letterKeyStream.pipe((0,l.M)(s=>this._pressedLetters.push(s)),(0,m.B)(i),(0,c.p)(()=>this._pressedLetters.length>0),(0,t.T)(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(s=>{for(let h=1;h<this._items.length+1;h++){const I=this._items[(this._selectedItemIndex+h)%this._items.length];if(!this._skipPredicateFn?.(I)&&0===I.getLabel?.().toLocaleUpperCase().trim().indexOf(s)){this._selectedItem.next(I);break}}this._pressedLetters=[]})}}},9843:(p,o,r)=>{r.d(o,{L:()=>a});var _=r(9498),l=r(8359),m=r(1413),c=r(8499),t=r(3737),n=r(3740);class a{_items;_activeItemIndex=-1;_activeItem=(0,_.vPA)(null);_wrap=!1;_typeaheadSubscription=l.yU.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,i){this._items=e,e instanceof _.rOR?this._itemChangesSubscription=e.changes.subscribe(s=>this._itemsChanged(s.toArray())):(0,_.Hps)(e)&&(this._effectRef=(0,_.QZP)(()=>this._itemsChanged(e()),{injector:i}))}tabOut=new m.B;change=new m.B;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();const i=this._getItemsArray();return this._typeahead=new c.T(i,{debounceInterval:"number"==typeof e?e:void 0,skipPredicate:s=>this._skipPredicateFn(s)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(s=>{this.setActiveItem(s)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,i=10){return this._pageUpAndDown={enabled:e,delta:i},this}setActiveItem(e){const i=this._activeItem();this.updateActiveItem(e),this._activeItem()!==i&&this.change.next(this._activeItemIndex)}onKeydown(e){const i=e.keyCode,h=["altKey","ctrlKey","metaKey","shiftKey"].every(d=>!e[d]||this._allowedModifierKeys.indexOf(d)>-1);switch(i){case n.T:return void this.tabOut.next();case n.D:if(this._vertical&&h){this.setNextItemActive();break}return;case n.U:if(this._vertical&&h){this.setPreviousItemActive();break}return;case n.R:if(this._horizontal&&h){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case n.L:if(this._horizontal&&h){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case n.H:if(this._homeAndEnd&&h){this.setFirstItemActive();break}return;case n.E:if(this._homeAndEnd&&h){this.setLastItemActive();break}return;case n.b:if(this._pageUpAndDown.enabled&&h){const d=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(d>0?d:0,1);break}return;case n.P:if(this._pageUpAndDown.enabled&&h){const d=this._activeItemIndex+this._pageUpAndDown.delta,I=this._getItemsArray().length;this._setActiveItemByIndex(d<I?d:I-1,-1);break}return;default:return void((h||(0,t.h)(e,"shiftKey"))&&this._typeahead?.handleKey(e))}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const i=this._getItemsArray(),s="number"==typeof e?e:i.indexOf(e);this._activeItem.set(i[s]??null),this._activeItemIndex=s,this._typeahead?.setCurrentSelectedItemIndex(s)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const i=this._getItemsArray();for(let s=1;s<=i.length;s++){const h=(this._activeItemIndex+e*s+i.length)%i.length;if(!this._skipPredicateFn(i[h]))return void this.setActiveItem(h)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,i){const s=this._getItemsArray();if(s[e]){for(;this._skipPredicateFn(s[e]);)if(!s[e+=i])return;this.setActiveItem(e)}}_getItemsArray(){return(0,_.Hps)(this._items)?this._items():this._items instanceof _.rOR?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);const i=this._activeItem();if(i){const s=e.indexOf(i);s>-1&&s!==this._activeItemIndex&&(this._activeItemIndex=s,this._typeahead?.setCurrentSelectedItemIndex(s))}}}}}]);