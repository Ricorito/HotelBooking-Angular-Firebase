"use strict";(self.webpackChunkszallas_foglalo=self.webpackChunkszallas_foglalo||[]).push([[651],{2651:(L,C,n)=>{n.r(C),n.d(C,{RoomListComponent:()=>W});var o=n(177),b=n(8498),p=n(5596),R=n(2798),M=n(1551),z=n(6471),v=n(4026),e=n(9498),m=n(2451);let i=(()=>{class a{static \u0275fac=function(r){return new(r||a)};static \u0275mod=e.$C({type:a});static \u0275inj=e.G2t({imports:[v.A,m.M,m.M]})}return a})();var c=n(4308),O=n(8599),k=n(3746),B=n(1659),P=n(8822),_=n(9417),w=n(4572),F=n(9172),j=n(6354),T=n(8081),I=n(4796),D=n(3733),$=n(1958);const A=a=>({unavailable:a}),N=a=>["/rooms",a],S=a=>["/rooms/edit",a];function G(a,u){1&a&&(e.j41(0,"button",18)(1,"mat-icon"),e.EFF(2,"add"),e.k0s(),e.EFF(3," \xdaj szoba "),e.k0s())}function H(a,u){1&a&&(e.j41(0,"div",29)(1,"mat-icon"),e.EFF(2,"do_not_disturb"),e.k0s(),e.j41(3,"span"),e.EFF(4,"Foglalt"),e.k0s()())}function Y(a,u){if(1&a&&(e.qex(0),e.j41(1,"mat-chip"),e.EFF(2),e.k0s(),e.bVm()),2&a){const t=u.$implicit;e.R7$(2),e.JRh(t)}}function K(a,u){if(1&a&&(e.j41(0,"span",32),e.EFF(1),e.k0s()),2&a){const t=e.XpG(2).$implicit;e.R7$(),e.SpI("+",t.amenities.length-3," t\xf6bb")}}function V(a,u){if(1&a&&(e.j41(0,"div",30),e.DNE(1,Y,3,1,"ng-container",16)(2,K,2,1,"span",31),e.k0s()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",t.amenities.slice(0,3)),e.R7$(),e.Y8G("ngIf",t.amenities.length>3)}}function U(a,u){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"button",33),e.EFF(2," Szerkeszt\xe9s "),e.k0s(),e.j41(3,"button",34),e.bIt("click",function(){e.eBV(t);const g=e.XpG().$implicit,h=e.XpG();return e.Njj(h.deleteRoom(g.id))}),e.EFF(4," T\xf6rl\xe9s "),e.k0s(),e.bVm()}if(2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("routerLink",e.eq3(1,S,t.id))}}function J(a,u){if(1&a&&(e.qex(0),e.j41(1,"mat-card",19),e.DNE(2,H,5,0,"div",20),e.nrm(3,"img",21),e.j41(4,"mat-card-content")(5,"div",22)(6,"h2"),e.EFF(7),e.k0s(),e.j41(8,"div",23),e.EFF(9),e.k0s()(),e.j41(10,"p",24),e.EFF(11),e.nI1(12,"currency"),e.k0s(),e.j41(13,"p",25)(14,"mat-icon"),e.EFF(15,"person"),e.k0s(),e.EFF(16),e.k0s(),e.j41(17,"p",26),e.EFF(18),e.nI1(19,"slice"),e.k0s(),e.DNE(20,V,3,2,"div",27),e.k0s(),e.j41(21,"mat-card-actions")(22,"button",28),e.EFF(23," R\xe9szletek "),e.k0s(),e.DNE(24,U,5,3,"ng-container",17),e.nI1(25,"async"),e.k0s()(),e.bVm()),2&a){const t=u.$implicit,r=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(24,A,!t.isAvailable)),e.R7$(),e.Y8G("ngIf",!t.isAvailable),e.R7$(),e.Y8G("src",t.images&&t.images.length>0?t.images[0]:"/room.png",e.B4B)("alt",t.number),e.R7$(4),e.JRh(t.number),e.R7$(2),e.SpI(" ","single"===t.type?"Egy\xe1gyas":"double"===t.type?"K\xe9t\xe1gyas":"suite"===t.type?"Lakoszt\xe1ly":"deluxe"===t.type?"Deluxe":t.type," "),e.R7$(2),e.SpI("",e.ii3(12,13,t.price,"HUF","symbol","1.0-0")," / \xe9jszaka"),e.R7$(5),e.SpI(" ",t.capacity," f\u0151 "),e.R7$(2),e.Lme("",e.brH(19,18,t.description,0,100),"",t.description.length>100?"...":"",""),e.R7$(2),e.Y8G("ngIf",t.amenities&&t.amenities.length>0),e.R7$(2),e.Y8G("routerLink",e.eq3(26,N,t.id)),e.R7$(2),e.Y8G("ngIf",e.bMT(25,22,r.isAdmin$))}}function X(a,u){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"div",35)(2,"p"),e.EFF(3,"Nincs a keres\xe9si felt\xe9teleknek megfelel\u0151 szoba."),e.k0s(),e.j41(4,"button",36),e.bIt("click",function(){e.eBV(t);const g=e.XpG();return e.Njj(g.resetFilters())}),e.EFF(5," Sz\u0171r\u0151k t\xf6rl\xe9se "),e.k0s()(),e.bVm()}}let W=(()=>{class a{roomService;authService;dialog;snackBar;rooms$;filteredRooms$;isAdmin$;searchControl=new _.MJ("");typeControl=new _.MJ("");availabilityControl=new _.MJ("");constructor(t,r,g,h){this.roomService=t,this.authService=r,this.dialog=g,this.snackBar=h}ngOnInit(){this.rooms$=this.roomService.getRooms(),this.isAdmin$=this.authService.isAdmin(),this.filteredRooms$=(0,w.z)([this.rooms$,this.searchControl.valueChanges.pipe((0,F.Z)("")),this.typeControl.valueChanges.pipe((0,F.Z)("")),this.availabilityControl.valueChanges.pipe((0,F.Z)(""))]).pipe((0,j.T)(([t,r,g,h])=>{let E=t;if(r){const f=r.toLowerCase();E=E.filter(y=>y.number.toLowerCase().includes(f)||y.description.toLowerCase().includes(f))}if(g){const f=g.toLowerCase();E=E.filter(y=>{const x=y.type.toLowerCase();return""===f||"single"===f&&"egy\xe1gyas"===x||"double"===f&&"k\xe9t\xe1gyas"===x||"suite"===f&&"lakoszt\xe1ly"===x||"family"===f&&"csal\xe1di"===x||"deluxe"===f&&"deluxe"===x})}if(""!==h){const f="true"===h;E=E.filter(y=>y.isAvailable===f)}return E}))}resetFilters(){this.searchControl.setValue(""),this.typeControl.setValue(""),this.availabilityControl.setValue("")}deleteRoom(t){t?confirm("Biztosan t\xf6r\xf6lni szeretn\xe9d ezt a szob\xe1t? Ez a m\u0171velet nem visszavonhat\xf3.")&&this.roomService.deleteRoom(t).subscribe({next:()=>{this.snackBar.open("Szoba sikeresen t\xf6r\xf6lve","Bez\xe1r\xe1s",{duration:3e3}),setTimeout(()=>{window.location.reload()},3e3)},error:r=>{this.snackBar.open("Hiba a szoba t\xf6rl\xe9sekor","Bez\xe1r\xe1s",{duration:2e3}),console.error(r)}}):console.error("Hib\xe1s szoba ID")}static \u0275fac=function(r){return new(r||a)(e.rXU(T.N),e.rXU(I.u),e.rXU(B.j),e.rXU(P.UG))};static \u0275cmp=e.VBU({type:a,selectors:[["app-room-list"]],decls:42,vars:12,consts:[[1,"room-list-container"],[1,"header"],["mat-raised-button","","color","primary","routerLink","/rooms/new",4,"ngIf"],[1,"filters"],["appearance","outline"],["matInput","","placeholder","Keres\xe9s szobasz\xe1m vagy le\xedr\xe1s szerint",3,"formControl"],["matSuffix",""],[3,"formControl"],["value",""],["value","single"],["value","double"],["value","suite"],["value","family"],["value","true"],["value","false"],[1,"rooms-grid"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-raised-button","","color","primary","routerLink","/rooms/new"],[3,"ngClass"],["class","availability-badge",4,"ngIf"],["mat-card-image","",3,"src","alt"],[1,"room-header"],[1,"room-type"],[1,"price"],[1,"capacity"],[1,"description"],["class","amenities",4,"ngIf"],["mat-button","","color","primary",3,"routerLink"],[1,"availability-badge"],[1,"amenities"],["class","more-amenities",4,"ngIf"],[1,"more-amenities"],["mat-button","","color","accent",3,"routerLink"],["mat-button","","color","warn",3,"click"],[1,"no-rooms"],["mat-raised-button","","color","primary",3,"click"]],template:function(r,g){if(1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"h1"),e.EFF(3,"Szob\xe1k"),e.k0s(),e.DNE(4,G,4,0,"button",2),e.nI1(5,"async"),e.k0s(),e.j41(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),e.EFF(9,"Keres\xe9s"),e.k0s(),e.nrm(10,"input",5),e.j41(11,"mat-icon",6),e.EFF(12,"search"),e.k0s()(),e.j41(13,"mat-form-field",4)(14,"mat-label"),e.EFF(15,"T\xedpus"),e.k0s(),e.j41(16,"mat-select",7)(17,"mat-option",8),e.EFF(18,"\xd6sszes"),e.k0s(),e.j41(19,"mat-option",9),e.EFF(20,"Egy\xe1gyas"),e.k0s(),e.j41(21,"mat-option",10),e.EFF(22,"K\xe9t\xe1gyas"),e.k0s(),e.j41(23,"mat-option",11),e.EFF(24,"Lakoszt\xe1ly"),e.k0s(),e.j41(25,"mat-option",12),e.EFF(26,"Csal\xe1di"),e.k0s()()(),e.j41(27,"mat-form-field",4)(28,"mat-label"),e.EFF(29,"El\xe9rhet\u0151s\xe9g"),e.k0s(),e.j41(30,"mat-select",7)(31,"mat-option",8),e.EFF(32,"\xd6sszes"),e.k0s(),e.j41(33,"mat-option",13),e.EFF(34,"El\xe9rhet\u0151"),e.k0s(),e.j41(35,"mat-option",14),e.EFF(36,"Foglalt"),e.k0s()()()(),e.j41(37,"div",15),e.DNE(38,J,26,28,"ng-container",16),e.nI1(39,"async"),e.k0s(),e.DNE(40,X,6,0,"ng-container",17),e.nI1(41,"async"),e.k0s()),2&r){let h;e.R7$(4),e.Y8G("ngIf",e.bMT(5,6,g.isAdmin$)),e.R7$(6),e.Y8G("formControl",g.searchControl),e.R7$(6),e.Y8G("formControl",g.typeControl),e.R7$(14),e.Y8G("formControl",g.availabilityControl),e.R7$(8),e.Y8G("ngForOf",e.bMT(39,8,g.filteredRooms$)),e.R7$(2),e.Y8G("ngIf",0===(null==(h=e.bMT(41,10,g.filteredRooms$))?null:h.length))}},dependencies:[o.MD,o.YU,o.Sq,o.bT,o.Jj,o.P9,o.oe,b.Wk,_.X1,_.me,_.BC,_.l_,p.Hu,p.RN,p.YY,p.m2,p.kF,R.h,R.M,M.M,M.d,z.YN,z.Jl,i,c.a,D.k,D.b,D.i,c.M,$.a,O.M,k.fS,k.fg,B.n,P._T],styles:[".room-list-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto 20px;background-color:#fff;border-radius:4px;box-shadow:0 2px 4px #0000001a;padding:15px}@media (max-width: 599px){.room-list-container[_ngcontent-%COMP%]{padding:10px}}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:10px}@media (max-width: 599px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;width:100%}}@media (max-width: 599px){.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.filters[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px;margin-bottom:20px}@media (max-width: 599px){.filters[_ngcontent-%COMP%]{grid-template-columns:1fr}}.rooms-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}@media (max-width: 599px){.rooms-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.rooms-grid[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{display:flex;flex-direction:column}.rooms-grid[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:inherit}.rooms-grid[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex-grow:1;padding:16px;display:flex;flex-direction:column;justify-content:space-between}.room-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.room-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem}@media (max-width: 599px){.room-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}}.availability-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.75rem;font-weight:700}.available[_ngcontent-%COMP%]{background-color:#e6f7e6;color:#2e7d32}.unavailable[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.room-type[_ngcontent-%COMP%]{color:#666;margin-bottom:4px}.room-price[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;margin-bottom:8px}.amenities[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}.no-rooms[_ngcontent-%COMP%]{text-align:center;padding:40px}@media (max-width: 599px){.no-rooms[_ngcontent-%COMP%]{padding:20px}.no-rooms[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media (max-width: 599px){mat-card-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-left:0!important;margin-right:0!important;margin-bottom:8px}}"]})}return a})()},8081:(L,C,n)=>{n.d(C,{N:()=>z});var o=n(5891),b=n(8455),p=n(6354),R=n(7673),M=n(9498);let z=(()=>{class v{database=(0,o.C3)();roomsPath="rooms";constructor(){}getRooms(){const m=(0,o.KR)(this.database,this.roomsPath);return(0,b.H)((0,o.Jt)(m)).pipe((0,p.T)(l=>{const s=[];return l.exists()&&l.forEach(d=>{const i=d.val();return i.id=d.key,s.push(i),!1}),s.sort((d,i)=>d.number.localeCompare(i.number))}))}getRoomsByHotel(m){const l=(0,o.P)((0,o.KR)(this.database,this.roomsPath),(0,o.kT)("hotelId"),(0,o.iz)(m));return(0,b.H)((0,o.Jt)(l)).pipe((0,p.T)(s=>{const d=[];return s.exists()&&s.forEach(i=>{const c=i.val();return c.id=i.key,d.push(c),!1}),d.sort((i,c)=>i.number.localeCompare(c.number))}))}getAvailableRooms(){const m=(0,o.KR)(this.database,this.roomsPath);return(0,b.H)((0,o.Jt)(m)).pipe((0,p.T)(l=>{const s=[];return l.exists()&&l.forEach(d=>{const i=d.val();return i.isAvailable&&(i.id=d.key,s.push(i)),!1}),s.sort((d,i)=>d.price-i.price)}))}getAvailableRoomsByHotel(m){const l=(0,o.KR)(this.database,this.roomsPath);return(0,b.H)((0,o.Jt)(l)).pipe((0,p.T)(s=>{const d=[];return s.exists()&&s.forEach(i=>{const c=i.val();return c.isAvailable&&c.hotelId===m&&(c.id=i.key,d.push(c)),!1}),d.sort((i,c)=>i.price-c.price)}))}getRoomsByType(m){const l=(0,o.KR)(this.database,this.roomsPath);return(0,b.H)((0,o.Jt)(l)).pipe((0,p.T)(s=>{const d=[];return s.exists()&&s.forEach(i=>{const c=i.val();return c.type===m&&(c.id=i.key,d.push(c)),!1}),d.sort((i,c)=>i.price-c.price)}))}getRoom(m){const l=(0,o.KR)(this.database,`${this.roomsPath}/${m}`);return(0,b.H)((0,o.Jt)(l)).pipe((0,p.T)(s=>{if(s.exists()){const d=s.val();return d.id=s.key,d}throw new Error("Szoba nem tal\xe1lhat\xf3!")}))}addRoom(m){const l=(0,o.KR)(this.database,this.roomsPath),s=(0,o.VC)(l);return(0,b.H)((0,o.hZ)(s,m)).pipe((0,p.T)(()=>s.key||""))}updateRoom(m,l){const s=(0,o.KR)(this.database,`${this.roomsPath}/${m}`);return(0,b.H)((0,o.yo)(s,l))}deleteRoom(m){const l=(0,o.KR)(this.database,`${this.roomsPath}/${m}`);return(0,b.H)((0,o.TF)(l))}checkRoomAvailability(m,l,s){return(0,R.of)(!0)}static \u0275fac=function(l){return new(l||v)};static \u0275prov=M.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()}}]);